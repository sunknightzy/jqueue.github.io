<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta />
    <title>聊一聊 session 和 cookie - J.Queue的技术博客</title>
    <link rel="manifest" href="/manifest.json" />
    <meta name="application-name" content="J.Queue的技术博客" />
    <meta name="msapplication-TileImage" content="/img/favicon.ico" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="J.Queue的技术博客" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta
      name="description"
      content="本来是想写 aop 设计机制的，但是最近被 session 这个东西搞得有点头大，所以就抽点时间来整理下关于 session 的一些东西。"
    />
    <meta property="og:type" content="blog" />
    <meta property="og:title" content="聊一聊 session 和 cookie" />
    <meta
      property="og:url"
      content="http://www.glmapper.com/2018/05/13/middleware/middleware-http-session-cookie/"
    />
    <meta property="og:site_name" content="J.Queue的技术博客" />
    <meta
      property="og:description"
      content="本来是想写 aop 设计机制的，但是最近被 session 这个东西搞得有点头大，所以就抽点时间来整理下关于 session 的一些东西。"
    />
    <meta property="og:locale" content="zh_CN" />
    <meta
      property="og:image"
      content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/5/13/163551ad5795255d~tplv-t2oaga2asx-image.image"
    />
    <meta
      property="og:image"
      content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/5/13/163562469179fe66~tplv-t2oaga2asx-image.image"
    />
    <meta
      property="article:published_time"
      content="2018-05-12T21:10:25.000Z"
    />
    <meta property="article:modified_time" content="2022-04-23T14:17:59.830Z" />
    <meta property="article:author" content="J.Queue" />
    <meta property="article:tag" content="session" />
    <meta property="article:tag" content="cookie" />
    <meta property="article:tag" content="http" />
    <meta property="twitter:card" content="summary" />
    <meta
      property="twitter:image"
      content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/5/13/163551ad5795255d~tplv-t2oaga2asx-image.image"
    />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "http://www.glmapper.com/2018/05/13/middleware/middleware-http-session-cookie/"
        },
        "headline": "聊一聊 session 和 cookie",
        "image": [],
        "datePublished": "2018-05-12T21:10:25.000Z",
        "dateModified": "2022-04-23T14:17:59.830Z",
        "author": { "@type": "Person", "name": "J.Queue" },
        "publisher": {
          "@type": "Organization",
          "name": "J.Queue的技术博客",
          "logo": {
            "@type": "ImageObject",
            "url": { "text": "J.Queue的技术博客" }
          }
        },
        "description": "本来是想写 aop 设计机制的，但是最近被 session 这个东西搞得有点头大，所以就抽点时间来整理下关于 session 的一些东西。"
      }
    </script>
    <link
      rel="canonical"
      href="http://www.glmapper.com/2018/05/13/middleware/middleware-http-session-cookie/"
    />
    <link rel="icon" href="/img/favicon.ico" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/github.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"
    />
    <link rel="stylesheet" href="/css/default.css" />
    <style>
      body > .footer,
      body > .navbar,
      body > .section {
        opacity: 0;
      }
    </style>
    <!--!-->
    <!--!-->
    <!--!-->
    <script
      src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"
      defer
    ></script>
    <!--!-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"
    />
    <!--!-->
    <!--!-->
    <style>
      .pace {
        -webkit-pointer-events: none;
        pointer-events: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }
      .pace-inactive {
        display: none;
      }
      .pace .pace-progress {
        background: #3273dc;
        position: fixed;
        z-index: 2000;
        top: 0;
        right: 100%;
        width: 100%;
        height: 2px;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script>
    <!--!-->
    <!--!-->
    <!-- hexo injector head_end start -->
    <script>
      ;(function () {
        function switchTab() {
          if (!location.hash) {
            return
          }
          Array.from(document.querySelectorAll('.tab-content')).forEach(
            ($tab) => {
              $tab.classList.add('is-hidden')
            }
          )
          Array.from(document.querySelectorAll('.tabs li')).forEach(($tab) => {
            $tab.classList.remove('is-active')
          })
          const $activeTab = document.querySelector(location.hash)
          if ($activeTab) {
            $activeTab.classList.remove('is-hidden')
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`)
          if ($tabMenu) {
            $tabMenu.parentElement.classList.add('is-active')
          }
        }
        switchTab()
        window.addEventListener('hashchange', switchTab, false)
      })()
    </script>
    <!-- hexo injector head_end end -->
    <meta name="generator" content="Hexo 6.1.0" />
    <link
      rel="alternate"
      href="/atom.xml"
      title="J.Queue的技术博客"
      type="application/atom+xml"
    />
  </head>
  <body class="is-3-column">
    <nav class="navbar navbar-main">
      <div class="container navbar-container">
        <div class="navbar-brand justify-content-center">
          <a class="navbar-item navbar-logo" href="/">J.Queue的技术博客</a>
        </div>
        <div class="navbar-menu">
          <div class="navbar-start">
            <a class="navbar-item" href="/">首页</a
            ><a class="navbar-item" href="/archives">归档</a
            ><a class="navbar-item" href="/categories">分类</a
            ><a class="navbar-item" href="/tags">Tags</a
            ><a class="navbar-item" href="/about">关于</a>
          </div>
          <div class="navbar-end">
            <a
              class="navbar-item"
              target="_blank"
              rel="noopener"
              title="Download on GitHub"
              href="https://github.com/glmapper"
              ><i class="fab fa-github"></i></a
            ><a
              class="navbar-item is-hidden-tablet catalogue"
              title="目录"
              href="javascript:;"
              ><i class="fas fa-list-ul"></i></a
            ><a class="navbar-item search" title="搜索" href="javascript:;"
              ><i class="fas fa-search"></i
            ></a>
          </div>
        </div>
      </div>
    </nav>
    <section class="section">
      <div class="container">
        <div class="columns">
          <div
            class="column order-2 column-main is-8-tablet is-8-desktop is-10-widescreen"
          >
            <div class="card">
              <article class="card-content article" role="article">
                <div
                  class="article-meta is-size-7 is-uppercase level is-mobile"
                >
                  <div class="level-left">
                    <span class="level-item"
                      ><time
                        datetime="2018-05-12T21:10:25.000Z"
                        title="2018/5/13 上午5:10:25"
                        >2018-05-13</time
                      >发表</span
                    ><span class="level-item"
                      ><time
                        datetime="2022-04-23T14:17:59.830Z"
                        title="2022/4/23 下午10:17:59"
                        >2022-04-23</time
                      >更新</span
                    ><span class="level-item"
                      ><a class="link-muted" href="/categories/Middleware/"
                        >Middleware</a
                      ></span
                    ><span class="level-item">30 分钟读完 (大约4502个字)</span
                    ><span class="level-item" id="busuanzi_container_page_pv"
                      ><span id="busuanzi_value_page_pv">0</span>次访问</span
                    >
                  </div>
                </div>
                <h1 class="title is-3 is-size-4-mobile">
                  聊一聊 session 和 cookie
                </h1>
                <div class="content">
                  <p>
                    本来是想写 aop 设计机制的，但是最近被 session
                    这个东西搞得有点头大，所以就抽点时间来整理下关于 session
                    的一些东西。
                  </p>
                  <span id="more"></span>

                  <h2 id="目录">
                    <a href="#目录" class="headerlink" title="目录"></a>目录
                  </h2>
                  <ul>
                    <li>
                      <a href="">从http协议的无状态性说起</a>
                      <ul>
                        <li><a href="">无连接和无状态</a></li>
                        <li><a href="">持久连接</a></li>
                        <li><a href="">http无状态</a></li>
                        <li><a href="">如何保持状态信息</a></li>
                      </ul>
                    </li>
                    <li>
                      Cookie
                      <ul>
                        <li><a href="">Cookie机制原理</a></li>
                        <li><a href="">Cookie在servlet-api中的定义</a></li>
                        <li><a href="">Cookie属性</a></li>
                        <li><a href="">创建Cookie</a></li>
                        <li><a href="">Cookie更新</a></li>
                        <li><a href="">Cookie删除</a></li>
                        <li><a href="">从请求中获取Cookie</a></li>
                        <li><a href="">Cookie同源与跨域</a></li>
                        <li>
                          <a href="">Cookie数量&amp;大小限制及处理策略</a>
                        </li>
                      </ul>
                    </li>
                    <li>
                      Session
                      <ul>
                        <li><a href="">session机制原理</a></li>
                        <li><a href="">HttpSession</a></li>
                        <li><a href="">创建session</a></li>
                        <li><a href="">生命周期</a></li>
                        <li><a href="">session的有效期</a></li>
                        <li><a href="">分布式session</a></li>
                      </ul>
                    </li>
                  </ul>
                  <h2 id="从http协议的无状态性说起">
                    <a
                      href="#从http协议的无状态性说起"
                      class="headerlink"
                      title="从http协议的无状态性说起"
                    ></a
                    >从http协议的无状态性说起
                  </h2>
                  <p>
                    HTTP是一种无状态协议。关于这个无状态之前我也不太理解，因为HTTP底层是TCP，既然是TCP，就是长连接，这个过程是保持连接状态的，又为什么说http是无状态的呢？先来搞清楚这两个概念：
                  </p>
                  <h3 id="无连接和无状态">
                    <a
                      href="#无连接和无状态"
                      class="headerlink"
                      title="无连接和无状态"
                    ></a
                    >无连接和无状态
                  </h3>
                  <ul>
                    <li>
                      <p>无连接</p>
                      <p>
                        每次连接只处理一个请求，服务端处理完客户端一次请求，等到客户端作出回应之后便断开连接；
                      </p>
                    </li>
                    <li>
                      <p>无状态</p>
                      <p>
                        是指服务端对于客户端每次发送的请求都认为它是一个新的请求，上一次会话和下一次会话没有联系；
                      </p>
                    </li>
                  </ul>
                  <p>
                    无连接的维度是连接，无状态的维度是请求；http是基于tcp的，而从http1.1开始默认使用持久连接；在这个连接过程中，客户端可以向服务端发送多次请求，但是各个请求之间的并没有什么联系；这样来考虑，就很好理解无状态这个概念了。
                  </p>
                  <h3 id="持久连接">
                    <a href="#持久连接" class="headerlink" title="持久连接"></a
                    >持久连接
                  </h3>
                  <p>
                    <code
                      >持久连接，本质上是客户端与服务器通信的时候，建立一个持久化的TCP连接，这个连接不会随着请求结束而关闭，通常会保持连接一段时间。</code
                    >
                  </p>
                  <p>
                    现有的持久连接类型有两种：HTTP&#x2F;1.0+的keep-alive和HTTP&#x2F;1.1的persistent。
                  </p>
                  <ul>
                    <li>HTTP&#x2F;1.0+的keep-alive</li>
                  </ul>
                  <p>先来开一张图：</p>
                  <p>
                    <img
                      src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/5/13/163551ad5795255d~tplv-t2oaga2asx-image.image"
                    /><br />这张图是请求<a
                      href="http://www.baidu.com时的请求头信息。这里面我们需要注意的是："
                      >www.baidu.com时的请求头信息。这里面我们需要注意的是：</a
                    >
                  </p>
                  <figure class="highlight json">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">connection<span class="punctuation">:</span> keep-alive</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>
                    我们每次发送一个HTTP请求，会附带一个connection:keep-alive，这个参数就是声明一个持久连接。
                  </p>
                  <ul>
                    <li>HTTP&#x2F;1.1的persistent</li>
                  </ul>
                  <p>
                    HTTP&#x2F;1.1的持久连接默认是开启的，只有首部中包含connection：close，才会事务结束之后关闭连接。当然服务器和客户端仍可以随时关闭持久连接。
                  </p>
                  <p>
                    当发送了connection：close首部之后客户端就没有办法在那条连接上发送更多的请求了。当然根据持久连接的特性，一定要传输正确的content-length。
                  </p>
                  <p>
                    还有根据HTTP&#x2F;1.1的特性，是不应该和HTTP&#x2F;1.0客户端建立持久连接的。最后，一定要做好重发的准备。
                  </p>
                  <h3 id="http无状态">
                    <a
                      href="#http无状态"
                      class="headerlink"
                      title="http无状态"
                    ></a
                    >http无状态
                  </h3>
                  <p>
                    OK，首先来明确下，这个状态的主体指的是什么？应该是信息，这些信息是由服务端所维护的与客户端交互的信息（也称为状态信息）；<br />因为HTTP本身是不保存任何用户的状态信息的，所以HTTP是无状态的协议。
                  </p>
                  <h3 id="如何保持状态信息">
                    <a
                      href="#如何保持状态信息"
                      class="headerlink"
                      title="如何保持状态信息"
                    ></a
                    >如何保持状态信息
                  </h3>
                  <p>
                    在聊这个这个问题之前，我们来考虑下为什么http自己不来做这个事情：也就是让http变成有状态的。
                  </p>
                  <ul>
                    <li>
                      <p>http本身来实现状态维护</p>
                      <p>
                        从上面关于无状态的理解，如果现在需要让http自己变成有状态的，就意味着http协议需要保存交互的状态信息；暂且不说这种方式是否合适，但从维护状态信息这一点来说，代价就很高，因为既然保存了状态信息，那后续的一些行为必定也会受到状态信息的影响。
                      </p>
                      <p>
                        从历史角度来说，最初的http协议只是用来浏览静态文件的，无状态协议已经足够，这样实现的负担也很轻。但是随着web技术的不断发展，越来越多的场景需要状态信息能够得以保存；一方面是http本身不会去改变它的这种无状态的特性（至少目前是这样的），另一方面业务场景又迫切的需要保持状态；那么这个时候就需要来“装饰”一下http，引入一些其他机制来实现有状态。
                      </p>
                    </li>
                    <li>
                      <p>cookie和session体系</p>
                      <p>
                        通过引入cookie和session体系机制来维护状态信息。即用户第一次访问服务器的时候，服务器响应报头通常会出现一个Set-Cookie响应头，这里其实就是在本地设置一个cookie，当用户再次访问服务器的时候，http会附带这个cookie过去，cookie中存有sessionId这样的信息来到服务器这边确认是否属于同一次会话。
                      </p>
                    </li>
                  </ul>
                  <h2 id="Cookie">
                    <a href="#Cookie" class="headerlink" title="Cookie"></a
                    >Cookie
                  </h2>
                  <p>
                    cookie是由服务器发送给客户端（浏览器）的小量信息，以{key：value}的形式存在。
                  </p>
                  <h3 id="Cookie机制原理">
                    <a
                      href="#Cookie机制原理"
                      class="headerlink"
                      title="Cookie机制原理"
                    ></a
                    >Cookie机制原理
                  </h3>
                  <p>
                    客户端请求服务器时，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。而客户端浏览器会把Cookie保存起来。当浏览器再请求
                    服务器时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器通过检查该Cookie来获取用户状态。
                  </p>
                  <p>
                    我们通过看下servlet-api中Cookie类的定义及属性，来更加具体的了解Cookie。
                  </p>
                  <h3 id="Cookie在servlet-api中的定义">
                    <a
                      href="#Cookie在servlet-api中的定义"
                      class="headerlink"
                      title="Cookie在servlet-api中的定义"
                    ></a
                    >Cookie在servlet-api中的定义
                  </h3>
                  <figure class="highlight java">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cookie</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>, Serializable &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">6454587001725327448L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TSPECIALS;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">LSTRING_FILE</span> <span class="operator">=</span></span><br><span class="line">    <span class="string">&quot;javax.servlet.http.LocalStrings&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ResourceBundle</span> <span class="variable">lStrings</span> <span class="operator">=</span></span><br><span class="line">    ResourceBundle.getBundle(<span class="string">&quot;javax.servlet.http.LocalStrings&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String value;</span><br><span class="line">    <span class="keyword">private</span> String comment;</span><br><span class="line">    <span class="keyword">private</span> String domain;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">maxAge</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> String path;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> secure;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">version</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isHttpOnly</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//....省略其他方法</span></span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h3 id="Cookie属性">
                    <a
                      href="#Cookie属性"
                      class="headerlink"
                      title="Cookie属性"
                    ></a
                    >Cookie属性
                  </h3>
                  <table>
                    <thead>
                      <tr>
                        <th>属性</th>
                        <th>解释</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>name</td>
                        <td>cookie 的名字，Cookie 一旦创建，名称便不可更改</td>
                      </tr>
                      <tr>
                        <td>value</td>
                        <td>cookie 值</td>
                      </tr>
                      <tr>
                        <td>comment</td>
                        <td>
                          该Cookie的用处说明。浏览器显示Cookie信息的时候显示该说明
                        </td>
                      </tr>
                      <tr>
                        <td>domain</td>
                        <td>
                          可以访问该Cookie的域名。如果设置为“.baidu.com”，则所有以“baidu.com”结尾的域名都可以访问该Cookie；第一个字符必须为“.”
                        </td>
                      </tr>
                      <tr>
                        <td>maxAge</td>
                        <td>
                          Cookie失效的时间，单位秒。正数:
                          则超过maxAge秒之后失效。负数:
                          该Cookie为临时Cookie，关闭浏览器即失效，浏览器也不会以任何形式保存该Cookie。0:
                          表示删除该 Cookie。
                        </td>
                      </tr>
                      <tr>
                        <td>path</td>
                        <td>
                          该
                          Cookie的使用路径。path设置时，其以“&#x2F;”结尾。例如：path&#x3D;&#x2F;，说明本域名下contextPath都可以访问该Cookie;
                          path&#x3D;&#x2F;app&#x2F;，则只有contextPath为“&#x2F;app”的程序可以访问该Cookie
                        </td>
                      </tr>
                      <tr>
                        <td>secure</td>
                        <td>
                          该Cookie是否仅被使用安全协议传输。这里的安全协议包括HTTPS，SSL等。默认为false。
                        </td>
                      </tr>
                      <tr>
                        <td>version</td>
                        <td>
                          该Cookie使用的版本号，在servlet规范中默认是 0；0
                          表示遵循Netscape的Cookie规范，目前大多数用的都是这种规范；1
                          表示遵循W3C的RFC2109规范；规范过于严格，实施起来很难。
                        </td>
                      </tr>
                      <tr>
                        <td>isHttpOnly</td>
                        <td>
                          HttpOnly属性是用来限制非HTTP协议程序接口对客户端Cookie进行访问；也就是说如果想要在客户端取到httponly的Cookie的唯一方法就是使用AJAX，将取Cookie的操作放到服务端，接收客户端发送的ajax请求后将取值结果通过HTTP返回客户端。这样能有效的防止XSS攻击。
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <p>
                    上述的这些属性，除了 name 与 value
                    属性会被提交外，其他的属性对于客户端来说都是不可读的，也是不可被提交的。
                  </p>
                  <h3 id="创建Cookie">
                    <a
                      href="#创建Cookie"
                      class="headerlink"
                      title="创建Cookie"
                    ></a
                    >创建Cookie
                  </h3>
                  <figure class="highlight java">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;cookieSessionId&quot;</span>,<span class="string">&quot;qwertyuiop&quot;</span>);</span><br><span class="line">cookie.setDomain(<span class="string">&quot;.baidu.com&quot;</span>);             <span class="comment">// 设置域名</span></span><br><span class="line">cookie.setPath(<span class="string">&quot;/&quot;</span>);                        <span class="comment">// 设置路径</span></span><br><span class="line">cookie.setMaxAge(Integer.MAX_VALUE);        <span class="comment">// 设置有效期为永久</span></span><br><span class="line">response.addCookie(cookie);                 <span class="comment">// 回写到客户端</span></span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>
                    创建Cookie只能通过上述方式来创建，因为在Cookie类中只提供了这样一个构造函数。
                  </p>
                  <figure class="highlight java">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">//Cookie的构造函数</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Cookie</span><span class="params">(String name, String value)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (name != <span class="literal">null</span> &amp;&amp; name.length() != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//判断下是不是token</span></span><br><span class="line">        <span class="comment">//判断是不是和Cookie的属性字段重复</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.isToken(name) &amp;&amp; !name.equalsIgnoreCase(<span class="string">&quot;Comment&quot;</span>) &amp;&amp;</span><br><span class="line">        !name.equalsIgnoreCase(<span class="string">&quot;Discard&quot;</span>) &amp;&amp;</span><br><span class="line">        !name.equalsIgnoreCase(<span class="string">&quot;Domain&quot;</span>) &amp;&amp;</span><br><span class="line">        !name.equalsIgnoreCase(<span class="string">&quot;Expires&quot;</span>) &amp;&amp;</span><br><span class="line">        !name.equalsIgnoreCase(<span class="string">&quot;Max-Age&quot;</span>) &amp;&amp;</span><br><span class="line">        !name.equalsIgnoreCase(<span class="string">&quot;Path&quot;</span>) &amp;&amp;</span><br><span class="line">        !name.equalsIgnoreCase(<span class="string">&quot;Secure&quot;</span>) &amp;&amp;</span><br><span class="line">        !name.equalsIgnoreCase(<span class="string">&quot;Version&quot;</span>) &amp;&amp; !name.startsWith(<span class="string">&quot;$&quot;</span>)) &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">errMsg</span> <span class="operator">=</span></span><br><span class="line">            lStrings.getString(<span class="string">&quot;err.cookie_name_is_token&quot;</span>);</span><br><span class="line">            Object[] errArgs = <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;name&#125;;</span><br><span class="line">            errMsg = MessageFormat.format(errMsg, errArgs);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(errMsg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(lStrings.getString</span><br><span class="line">        (<span class="string">&quot;err.cookie_name_blank&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>

                  <h3 id="Cookie更新">
                    <a
                      href="#Cookie更新"
                      class="headerlink"
                      title="Cookie更新"
                    ></a
                    >Cookie更新
                  </h3>
                  <p>
                    在源码中可以知道，Cookie本身并没有提供修改的方法；在实际应用中，一般通过使用相同name的Cookie来覆盖原来的Cookie,以达到更新的目的。
                  </p>
                  <p>
                    但是这个修改的前提是需要具有相同domain，path的 Set-Cookie
                    消息头
                  </p>
                  <figure class="highlight java">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;cookieSessionId&quot;</span>,<span class="string">&quot;new-qwertyuiop&quot;</span>);</span><br><span class="line">response.addCookie(cookie);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h3 id="Cookie删除">
                    <a
                      href="#Cookie删除"
                      class="headerlink"
                      title="Cookie删除"
                    ></a
                    >Cookie删除
                  </h3>
                  <p>
                    与Cookie更新一样，Cookie本身也没有提供删除的方法；但是从前面分析Cookie属性时了解到，删除Cookie可以通过将maxAge设置为0即可。
                  </p>
                  <figure class="highlight java">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;cookieSessionId&quot;</span>,<span class="string">&quot;new-qwertyuiop&quot;</span>);</span><br><span class="line">cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">response.addCookie(cookie);</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>

                  <p>
                    上面的删除是我们自己可控的；但是也存在一些我们不可控或者说无意识情况下的删除操作：
                  </p>
                  <ul>
                    <li>如果maxAge是负值，则cookie在浏览器关闭时被删除</li>
                    <li>持久化cookie在到达失效日期时会被删除</li>
                    <li>
                      浏览器中的 cookie 数量达到上限，那么 cookie
                      会被删除以为新建的 cookie 创建空间。
                    </li>
                  </ul>
                  <p>
                    其实很多情况下，我们关注的都是后者。关于数量上限后面会说到。
                  </p>
                  <h3 id="从请求中获取Cookie">
                    <a
                      href="#从请求中获取Cookie"
                      class="headerlink"
                      title="从请求中获取Cookie"
                    ></a
                    >从请求中获取Cookie
                  </h3>
                  <figure class="highlight java">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line">Cookie[] cookies = request.getCookies();</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <h3 id="Cookie同源与跨域">
                    <a
                      href="#Cookie同源与跨域"
                      class="headerlink"
                      title="Cookie同源与跨域"
                    ></a
                    >Cookie同源与跨域
                  </h3>
                  <p>我们知道浏览器的同源策略：</p>
                  <blockquote>
                    <p>
                      URL由协议、域名、端口和路径组成，如果两个URL的协议、域名和端口相同，则表示他们同源。浏览器的同源策略，限制了来自不同源的”document”或脚本，对当前”document”读取或设置某些属性。
                    </p>
                  </blockquote>
                  <p>
                    对于Cookie来说，Cookie的同源只关注域名，是忽略协议和端口的。所以一般情况下，<a
                      target="_blank"
                      rel="noopener"
                      href="https://localhost:80/%E5%92%8Chttp://localhost:8080/%E7%9A%84Cookie%E6%98%AF%E5%85%B1%E4%BA%AB%E7%9A%84%E3%80%82"
                      >https://localhost:80/和http://localhost:8080/的Cookie是共享的。</a
                    >
                  </p>
                  <p>
                    Cookie是不可跨域的；在没有经过任何处理的情况下，二级域名不同也是不行的。(wenku.baidu.com和baike.baidu.com)。
                  </p>
                  <h3 id="Cookie数量-amp-大小限制及处理策略">
                    <a
                      href="#Cookie数量-amp-大小限制及处理策略"
                      class="headerlink"
                      title="Cookie数量&amp;大小限制及处理策略"
                    ></a
                    >Cookie数量&amp;大小限制及处理策略
                  </h3>
                  <table>
                    <thead>
                      <tr>
                        <th></th>
                        <th>IE6.0</th>
                        <th>IE7.0&#x2F;8.0</th>
                        <th>Opera</th>
                        <th>FF</th>
                        <th>Safari</th>
                        <th>Chrome</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>个数&#x2F;个</td>
                        <td>20&#x2F;域</td>
                        <td>50&#x2F;域</td>
                        <td>30&#x2F;域</td>
                        <td>50&#x2F;域</td>
                        <td>无限制</td>
                        <td>53&#x2F;域</td>
                      </tr>
                      <tr>
                        <td>大小&#x2F;Byte</td>
                        <td>4095</td>
                        <td>4095</td>
                        <td>4096</td>
                        <td>4097</td>
                        <td>4097</td>
                        <td>4097</td>
                      </tr>
                    </tbody>
                  </table>
                  <p><code>注：数据来自网络，仅供参考</code></p>
                  <p>
                    因为浏览器对于Cookie在数量上是有限制的，如果超过了自然会有一些剔除策略。在这篇文章中<a
                      target="_blank"
                      rel="noopener"
                      href="https://www.nczonline.net/blog/2008/05/17/browser-cookie-restrictions/"
                      >Browser cookie restrictions</a
                    >提到的剔除策略如下：
                  </p>
                  <blockquote>
                    <p>
                      The least recently used (LRU) approach automatically kicks
                      out the oldest cookie when the cookie limit has been
                      reached in order to allow the newest cookie some space.
                      Internet Explorer and Opera use this approach.
                    </p>
                  </blockquote>
                  <p>
                    最近最少使用（LRU）方法：在达到cookie限制时自动地剔除最老的cookie，以便腾出空间给许最新的cookie。Internet
                    Explorer和Opera使用这种方法。
                  </p>
                  <blockquote>
                    <p>
                      Firefox does something strange: it seems to randomly
                      decide which cookies to keep although the last cookie set
                      is always kept. There doesn’t seem to be any scheme it’s
                      following at all. The takeaway? Don’t go above the cookie
                      limit in Firefox.
                    </p>
                  </blockquote>
                  <p>
                    Firefox决定随机删除Cookie集中的一个Cookie，并没有什么章法。所以最好不要超过Firefox中的Cookie限制。
                  </p>
                  <p>超过大小长度的话就是直接被截取丢弃；</p>
                  <h2 id="Session">
                    <a href="#Session" class="headerlink" title="Session"></a
                    >Session
                  </h2>
                  <p>
                    Cookie机制弥补了HTTP协议无状态的不足。在Session出现之前，基本上所有的网站都采用Cookie来跟踪会话。
                  </p>
                  <p>与Cookie不同的是，session是以服务端保存状态的。</p>
                  <h3 id="session机制原理">
                    <a
                      href="#session机制原理"
                      class="headerlink"
                      title="session机制原理"
                    ></a
                    >session机制原理
                  </h3>
                  <p>
                    当客户端请求创建一个session的时候，服务器会先检查这个客户端的请求里是否已包含了一个session标识
                    - sessionId，
                  </p>
                  <ul>
                    <li>
                      如果已包含这个sessionId，则说明以前已经为此客户端创建过session，服务器就按照sessionId把这个session检索出来使用（如果检索不到，可能会新建一个）
                    </li>
                    <li>
                      如果客户端请求不包含sessionId，则为此客户端创建一个session并且生成一个与此session相关联的sessionId
                    </li>
                  </ul>
                  <p>
                    sessionId的值一般是一个既不会重复，又不容易被仿造的字符串，这个sessionId将被在本次响应中返回给客户端保存。保存sessionId的方式大多情况下用的是cookie。
                  </p>
                  <h3 id="HttpSession">
                    <a
                      href="#HttpSession"
                      class="headerlink"
                      title="HttpSession"
                    ></a
                    >HttpSession
                  </h3>
                  <p>
                    HttpSession和Cookie一样，都是javax.servlet.http下面的；Cookie是一个类，它描述了Cookie的很多内部细节。而HttpSession是一个接口，它为session的实现提供了一些行为约束。
                  </p>
                  <figure class="highlight java">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">HttpSession</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回session的创建时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getCreationTime</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个sessionId,唯一标识</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *返回客户端最后一次发送与该 session 会话相关的请求的时间</span></span><br><span class="line"><span class="comment">     *自格林尼治标准时间 1970 年 1 月 1 日午夜算起，以毫秒为单位。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getLastAccessedTime</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回当前session所在的ServletContext</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> ServletContext <span class="title function_">getServletContext</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMaxInactiveInterval</span><span class="params">(<span class="type">int</span> interval)</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回 Servlet 容器在客户端访问时保持 session</span></span><br><span class="line"><span class="comment">     * 会话打开的最大时间间隔</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMaxInactiveInterval</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> HttpSessionContext <span class="title function_">getSessionContext</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回在该 session会话中具有指定名称的对象，</span></span><br><span class="line"><span class="comment">     * 如果没有指定名称的对象，则返回 null。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getAttribute</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getValue</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回 String 对象的枚举，String 对象包含所有绑定到该 session</span></span><br><span class="line"><span class="comment">     * 会话的对象的名称。</span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title function_">getAttributeNames</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> String[] getValueNames();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAttribute</span><span class="params">(String name, Object value)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">putValue</span><span class="params">(String name, Object value)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeAttribute</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeValue</span><span class="params">(String name)</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指示该 session 会话无效，并解除绑定到它上面的任何对象。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invalidate</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果客户端不知道该 session 会话，或者如果客户选择不参入该</span></span><br><span class="line"><span class="comment">     * session 会话，则该方法返回 true。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isNew</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>

                  <h3 id="创建session">
                    <a
                      href="#创建session"
                      class="headerlink"
                      title="创建session"
                    ></a
                    >创建session
                  </h3>
                  <p>创建session的方式是通过request来创建；</p>
                  <figure class="highlight java">
                    <table>
                      <tr>
                        <td class="gutter">
                          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                        </td>
                        <td class="code">
                          <pre><span class="line"><span class="comment">// 1、创建Session对象</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(); </span><br><span class="line"><span class="comment">// 2、创建Session对象</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">true</span>); </span><br></pre>
                        </td>
                      </tr>
                    </table>
                  </figure>
                  <p>
                    这两种是一样的；如果session不存在，就新建一个；如果是false的话，标识如果不存在就返回null；
                  </p>
                  <h3 id="生命周期">
                    <a href="#生命周期" class="headerlink" title="生命周期"></a
                    >生命周期
                  </h3>
                  <p>
                    session的生命周期指的是从Servlet容器创建session对象到销毁的过程。Servlet容器会依据session对象设置的存活时间，在达到session时间后将session对象销毁。session生成后，只要用户继续访问，服务器就会更新session的最后访问时间，并维护该session。
                  </p>
                  <p>
                    之前在单进程应用中，session我一般是存在内存中的，不会做持久化操作或者说使用三方的服务来存session信息，如redis。但是在分布式场景下，这种存在本机内存中的方式显然是不适用的，因为session无法共享。这个后面说。
                  </p>
                  <h3 id="session的有效期">
                    <a
                      href="#session的有效期"
                      class="headerlink"
                      title="session的有效期"
                    ></a
                    >session的有效期
                  </h3>
                  <p>
                    session一般在内存中存放，内存空间本身大小就有一定的局限性，因此session需要采用一种过期删除的机制来确保session信息不会一直累积，来防止内存溢出的发生。
                  </p>
                  <p>
                    session的超时时间可以通过maxInactiveInterval属性来设置。
                  </p>
                  <p>
                    如果我们想让session失效的话，也可以当通过调用session的invalidate()来完成。
                  </p>
                  <h3 id="分布式session">
                    <a
                      href="#分布式session"
                      class="headerlink"
                      title="分布式session"
                    ></a
                    >分布式session
                  </h3>
                  <p>首先是为什么会有这样的概念出现？</p>
                  <p>
                    先考虑这样一个问题，现在我的应用需要部署在3台机器上。是不是出现这样一种情况，我第一次登陆，请求去了机器1，然后再机器1上创建了一个session；但是我第二次访问时，请求被路由到机器2了，但是机器2上并没有我的session信息，所以得重新登录。当然这种可以通过nginx的IP
                    HASH负载策略来解决。对于同一个IP请求都会去同一个机器。
                  </p>
                  <p>
                    但是业务发展的越来越大，拆分的越来越多，机器数不断增加；很显然那种方案就不行了。那么这个时候就需要考虑是不是应该将session信息放在一个独立的机器上，所以分布式session要解决的问题其实就是分布式环境下的session共享的问题。
                  </p>
                  <p>
                    <img
                      src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/5/13/163562469179fe66~tplv-t2oaga2asx-image.image"
                    />
                  </p>
                  <p>
                    上图中的关于session独立部署的方式有很多种，可以是一个独立的数据库服务，也可以是一个缓存服务(redis，目前比较常用的一种方式，即使用Redis来作为session缓存服务器)。
                  </p>
                  <h2 id="参考">
                    <a href="#参考" class="headerlink" title="参考"></a>参考
                  </h2>
                  <ul>
                    <li>
                      <a
                        target="_blank"
                        rel="noopener"
                        href="https://www.cnblogs.com/icelin/p/3974935.html"
                        >https://www.cnblogs.com/icelin/p/3974935.html</a
                      >
                    </li>
                    <li>
                      <a
                        target="_blank"
                        rel="noopener"
                        href="https://www.nczonline.net/blog/2008/05/17/browser-cookie-restrictions/"
                        >https://www.nczonline.net/blog/2008/05/17/browser-cookie-restrictions/</a
                      >
                    </li>
                    <li>
                      <a
                        target="_blank"
                        rel="noopener"
                        href="https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"
                        >https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE</a
                      >
                    </li>
                  </ul>
                </div>
                <div class="article-licensing box">
                  <div class="licensing-title">
                    <p>聊一聊 session 和 cookie</p>
                    <p>
                      <a
                        href="http://www.glmapper.com/2018/05/13/middleware/middleware-http-session-cookie/"
                        >http://www.glmapper.com/2018/05/13/middleware/middleware-http-session-cookie/</a
                      >
                    </p>
                  </div>
                  <div class="licensing-meta level is-mobile">
                    <div class="level-left">
                      <div class="level-item is-narrow">
                        <div>
                          <h6>作者</h6>
                          <p>J.Queue</p>
                        </div>
                      </div>
                      <div class="level-item is-narrow">
                        <div>
                          <h6>发布于</h6>
                          <p>2018-05-13</p>
                        </div>
                      </div>
                      <div class="level-item is-narrow">
                        <div>
                          <h6>更新于</h6>
                          <p>2022-04-23</p>
                        </div>
                      </div>
                      <div class="level-item is-narrow">
                        <div>
                          <h6>许可协议</h6>
                          <p>
                            <a
                              class="icons"
                              rel="noopener"
                              target="_blank"
                              title="Creative Commons"
                              href="https://creativecommons.org/"
                              ><i class="icon fab fa-creative-commons"></i
                            ></a>
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="article-tags is-size-7 mb-4">
                  <span class="mr-2">#</span
                  ><a class="link-muted mr-2" rel="tag" href="/tags/session/"
                    >session</a
                  ><a class="link-muted mr-2" rel="tag" href="/tags/cookie/"
                    >cookie</a
                  ><a class="link-muted mr-2" rel="tag" href="/tags/http/"
                    >http</a
                  >
                </div>
                <!--!-->
              </article>
            </div>
            <div class="card">
              <div class="card-content">
                <h3 class="menu-label has-text-centered">
                  喜欢这篇文章？打赏一下作者吧
                </h3>
                <div class="buttons is-centered">
                  <a class="button donate" data-type="alipay"
                    ><span class="icon is-small"
                      ><i class="fab fa-alipay"></i></span
                    ><span>支付宝</span
                    ><span class="qrcode"
                      ><img src="/img/zfb.JPG" alt="支付宝" /></span></a
                  ><a class="button donate" data-type="wechat"
                    ><span class="icon is-small"
                      ><i class="fab fa-weixin"></i></span
                    ><span>微信</span
                    ><span class="qrcode"
                      ><img src="/img/pay.JPG" alt="微信" /></span
                  ></a>
                </div>
              </div>
            </div>
            <nav class="post-navigation mt-4 level is-mobile">
              <div class="level-start">
                <a
                  class="article-nav-prev level level-item link-muted"
                  href="/2018/06/21/spring/spring-aop-form-concept/"
                  ><i class="level-item fas fa-chevron-left"></i
                  ><span class="level-item"
                    >聊一聊 AOP ：表现形式与基础概念</span
                  ></a
                >
              </div>
              <div class="level-end">
                <a
                  class="article-nav-next level level-item link-muted"
                  href="/2018/04/17/middleware/middleware-data-mybatis-sql/"
                  ><span class="level-item">关于 Mybatis 中 SQL 语句的整理</span
                  ><i class="level-item fas fa-chevron-right"></i
                ></a>
              </div>
            </nav>
            <div class="card">
              <div class="card-content">
                <h3 class="title is-5">评论</h3>
                <div id="comment-container"></div>
                <link
                  rel="stylesheet"
                  href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"
                />
                <script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script>
                <script>
                  var gitalk = new Gitalk({
                    id: '4fe6ef9a27597291abe2c8f0092f51ac',
                    repo: 'glmapper.github.io',
                    owner: 'glmapper',
                    clientID: 'd25147ddf77e70d7adfe',
                    clientSecret: 'c10bbd1ba7a09c96e4106709107d4da85d60be78',
                    admin: ['glmapper'],
                    createIssueManually: false,
                    distractionFreeMode: true,
                    perPage: 20,
                    pagerDirection: 'last',

                    enableHotKey: true,
                    language: 'zh-CN',
                  })
                  gitalk.render('comment-container')
                </script>
              </div>
            </div>
          </div>
          <div
            class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky"
          >
            <div class="card widget" data-type="profile">
              <div class="card-content">
                <nav class="level">
                  <div class="level-item has-text-centered flex-shrink-1">
                    <div>
                      <figure class="image is-128x128 mx-auto mb-2">
                        <img
                          class="avatar is-rounded"
                          src="/img/self.png"
                          alt="J.Queue"
                        />
                      </figure>
                      <p
                        class="title is-size-4 is-block"
                        style="line-height: inherit"
                      >
                        J.Queue
                      </p>
                      <p class="is-size-6 is-block">Java Developer</p>
                      <p class="is-size-6 is-flex justify-content-center">
                        <i class="fas fa-map-marker-alt mr-1"></i
                        ><span>HeFei AnHui</span>
                      </p>
                    </div>
                  </div>
                </nav>
                <nav class="level is-mobile">
                  <div class="level-item has-text-centered is-marginless">
                    <div>
                      <p class="heading">文章</p>
                      <a href="/archives"><p class="title">108</p></a>
                    </div>
                  </div>
                  <div class="level-item has-text-centered is-marginless">
                    <div>
                      <p class="heading">分类</p>
                      <a href="/categories"><p class="title">17</p></a>
                    </div>
                  </div>
                  <div class="level-item has-text-centered is-marginless">
                    <div>
                      <p class="heading">标签</p>
                      <a href="/tags"><p class="title">128</p></a>
                    </div>
                  </div>
                </nav>
                <div class="level">
                  <a
                    class="level-item button is-primary is-rounded"
                    href="https://github.com/glmapper"
                    target="_blank"
                    rel="noopener"
                    >关注我</a
                  >
                </div>
                <div class="level is-mobile is-multiline">
                  <a
                    class="level-item button is-transparent is-marginless"
                    target="_blank"
                    rel="noopener"
                    title="Github"
                    href="https://github.com/glmapper"
                    ><i class="fab fa-github"></i></a
                  ><a
                    class="level-item button is-transparent is-marginless"
                    target="_blank"
                    rel="noopener"
                    title="Twitter"
                    href="https://twitter.com"
                    ><i class="fab fa-twitter"></i></a
                  ><a
                    class="level-item button is-transparent is-marginless"
                    target="_blank"
                    rel="noopener"
                    title="weibo"
                    href="https://weibo.com/u/2412872703"
                    ><i class="fab fa-weibo"></i></a
                  ><a
                    class="level-item button is-transparent is-marginless"
                    target="_blank"
                    rel="noopener"
                    title="RSS"
                    href="/atom.xml"
                    ><i class="fas fa-rss"></i
                  ></a>
                </div>
              </div>
            </div>
            <div class="card widget" data-type="links">
              <div class="card-content">
                <div class="menu">
                  <h3 class="menu-label">链接</h3>
                  <ul class="menu-list">
                    <li>
                      <a
                        class="level is-mobile"
                        href="https://juejin.cn/user/3227821827961806"
                        target="_blank"
                        rel="noopener"
                        ><span class="level-left"
                          ><span class="level-item">掘金社区</span></span
                        ><span class="level-right"
                          ><span class="level-item tag">juejin.cn</span></span
                        ></a
                      >
                    </li>
                    <li>
                      <a
                        class="level is-mobile"
                        href="https://www.sofastack.tech/"
                        target="_blank"
                        rel="noopener"
                        ><span class="level-left"
                          ><span class="level-item">SOFAStack</span></span
                        ><span class="level-right"
                          ><span class="level-item tag"
                            >www.sofastack.tech</span
                          ></span
                        ></a
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="card widget" id="toc" data-type="toc">
              <div class="card-content">
                <div class="menu">
                  <h3 class="menu-label">目录</h3>
                  <ul class="menu-list">
                    <li>
                      <a class="level is-mobile" href="#目录"
                        ><span class="level-left"
                          ><span class="level-item">1</span
                          ><span class="level-item">目录</span></span
                        ></a
                      >
                    </li>
                    <li>
                      <a
                        class="level is-mobile"
                        href="#从http协议的无状态性说起"
                        ><span class="level-left"
                          ><span class="level-item">2</span
                          ><span class="level-item"
                            >从http协议的无状态性说起</span
                          ></span
                        ></a
                      >
                      <ul class="menu-list">
                        <li>
                          <a class="level is-mobile" href="#无连接和无状态"
                            ><span class="level-left"
                              ><span class="level-item">2.1</span
                              ><span class="level-item"
                                >无连接和无状态</span
                              ></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#持久连接"
                            ><span class="level-left"
                              ><span class="level-item">2.2</span
                              ><span class="level-item">持久连接</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#http无状态"
                            ><span class="level-left"
                              ><span class="level-item">2.3</span
                              ><span class="level-item">http无状态</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#如何保持状态信息"
                            ><span class="level-left"
                              ><span class="level-item">2.4</span
                              ><span class="level-item"
                                >如何保持状态信息</span
                              ></span
                            ></a
                          >
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="level is-mobile" href="#Cookie"
                        ><span class="level-left"
                          ><span class="level-item">3</span
                          ><span class="level-item">Cookie</span></span
                        ></a
                      >
                      <ul class="menu-list">
                        <li>
                          <a class="level is-mobile" href="#Cookie机制原理"
                            ><span class="level-left"
                              ><span class="level-item">3.1</span
                              ><span class="level-item"
                                >Cookie机制原理</span
                              ></span
                            ></a
                          >
                        </li>
                        <li>
                          <a
                            class="level is-mobile"
                            href="#Cookie在servlet-api中的定义"
                            ><span class="level-left"
                              ><span class="level-item">3.2</span
                              ><span class="level-item"
                                >Cookie在servlet-api中的定义</span
                              ></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#Cookie属性"
                            ><span class="level-left"
                              ><span class="level-item">3.3</span
                              ><span class="level-item">Cookie属性</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#创建Cookie"
                            ><span class="level-left"
                              ><span class="level-item">3.4</span
                              ><span class="level-item">创建Cookie</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#Cookie更新"
                            ><span class="level-left"
                              ><span class="level-item">3.5</span
                              ><span class="level-item">Cookie更新</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#Cookie删除"
                            ><span class="level-left"
                              ><span class="level-item">3.6</span
                              ><span class="level-item">Cookie删除</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#从请求中获取Cookie"
                            ><span class="level-left"
                              ><span class="level-item">3.7</span
                              ><span class="level-item"
                                >从请求中获取Cookie</span
                              ></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#Cookie同源与跨域"
                            ><span class="level-left"
                              ><span class="level-item">3.8</span
                              ><span class="level-item"
                                >Cookie同源与跨域</span
                              ></span
                            ></a
                          >
                        </li>
                        <li>
                          <a
                            class="level is-mobile"
                            href="#Cookie数量-amp-大小限制及处理策略"
                            ><span class="level-left"
                              ><span class="level-item">3.9</span
                              ><span class="level-item"
                                >Cookie数量&amp;大小限制及处理策略</span
                              ></span
                            ></a
                          >
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="level is-mobile" href="#Session"
                        ><span class="level-left"
                          ><span class="level-item">4</span
                          ><span class="level-item">Session</span></span
                        ></a
                      >
                      <ul class="menu-list">
                        <li>
                          <a class="level is-mobile" href="#session机制原理"
                            ><span class="level-left"
                              ><span class="level-item">4.1</span
                              ><span class="level-item"
                                >session机制原理</span
                              ></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#HttpSession"
                            ><span class="level-left"
                              ><span class="level-item">4.2</span
                              ><span class="level-item">HttpSession</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#创建session"
                            ><span class="level-left"
                              ><span class="level-item">4.3</span
                              ><span class="level-item">创建session</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#生命周期"
                            ><span class="level-left"
                              ><span class="level-item">4.4</span
                              ><span class="level-item">生命周期</span></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#session的有效期"
                            ><span class="level-left"
                              ><span class="level-item">4.5</span
                              ><span class="level-item"
                                >session的有效期</span
                              ></span
                            ></a
                          >
                        </li>
                        <li>
                          <a class="level is-mobile" href="#分布式session"
                            ><span class="level-left"
                              ><span class="level-item">4.6</span
                              ><span class="level-item"
                                >分布式session</span
                              ></span
                            ></a
                          >
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a class="level is-mobile" href="#参考"
                        ><span class="level-left"
                          ><span class="level-item">5</span
                          ><span class="level-item">参考</span></span
                        ></a
                      >
                    </li>
                  </ul>
                </div>
              </div>
              <script src="/js/toc.js" defer></script>
            </div>
            <div class="card widget" data-type="tags">
              <div class="card-content">
                <div class="menu">
                  <h3 class="menu-label">标签</h3>
                  <div class="field is-grouped is-grouped-multiline">
                    <div class="control">
                      <a class="tags has-addons" href="/tags/BeanDefinition/"
                        ><span class="tag">BeanDefinition</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/BeanPostProcessor/"
                        ><span class="tag">BeanPostProcessor</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/BeanWrapper/"
                        ><span class="tag">BeanWrapper</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/CAS/"
                        ><span class="tag">CAS</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/ClassLoader/"
                        ><span class="tag">ClassLoader</span
                        ><span class="tag">4</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/CopyOnWriteArraySet/"
                        ><span class="tag">CopyOnWriteArraySet</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Disruptor/"
                        ><span class="tag">Disruptor</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Embedded-Tomcat/"
                        ><span class="tag">Embedded Tomcat</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Exception/"
                        ><span class="tag">Exception</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Executor/"
                        ><span class="tag">Executor</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/FX-Application/"
                        ><span class="tag">FX Application</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/FatJar/"
                        ><span class="tag">FatJar</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Ioc/"
                        ><span class="tag">Ioc</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/JAR/"
                        ><span class="tag">JAR</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/JDK/"
                        ><span class="tag">JDK</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/JUC/"
                        ><span class="tag">JUC</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Kafka/"
                        ><span class="tag">Kafka</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/MANIFEST-MF/"
                        ><span class="tag">MANIFEST.MF</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Mockito/"
                        ><span class="tag">Mockito</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Mysql/"
                        ><span class="tag">Mysql</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/OOM/"
                        ><span class="tag">OOM</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/OpenTracing/"
                        ><span class="tag">OpenTracing</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/PropertySource/"
                        ><span class="tag">PropertySource</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Readiness-Check/"
                        ><span class="tag">Readiness Check</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/ResourceLoader/"
                        ><span class="tag">ResourceLoader</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/RestTemplate/"
                        ><span class="tag">RestTemplate</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/RocketMQ/"
                        ><span class="tag">RocketMQ</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/SOFA/"
                        ><span class="tag">SOFA</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/SOFAArk/"
                        ><span class="tag">SOFAArk</span
                        ><span class="tag">4</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/SOFAStack/"
                        ><span class="tag">SOFAStack</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/SpringBoot/"
                        ><span class="tag">SpringBoot</span
                        ><span class="tag">16</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/TestDouble/"
                        ><span class="tag">TestDouble</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/ThreadPoolExecutor/"
                        ><span class="tag">ThreadPoolExecutor</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Tracer/"
                        ><span class="tag">Tracer</span
                        ><span class="tag">4</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/Zipkin/"
                        ><span class="tag">Zipkin</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/ab-test/"
                        ><span class="tag">ab test</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/actuator/"
                        ><span class="tag">actuator</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/aop/"
                        ><span class="tag">aop</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/api/"
                        ><span class="tag">api</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/apollo/"
                        ><span class="tag">apollo</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/bean-%E6%89%A9%E5%B1%95%E6%9C%BA%E5%88%B6/"
                        ><span class="tag">bean 扩展机制</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"
                        ><span class="tag">bean 生命周期</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/bootstrap/"
                        ><span class="tag">bootstrap</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/cache/"
                        ><span class="tag">cache</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/classloader/"
                        ><span class="tag">classloader</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/config/"
                        ><span class="tag">config</span
                        ><span class="tag">6</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/cookie/"
                        ><span class="tag">cookie</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/curator/"
                        ><span class="tag">curator</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/docker/"
                        ><span class="tag">docker</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/eureka/"
                        ><span class="tag">eureka</span
                        ><span class="tag">5</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/event/"
                        ><span class="tag">event</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/feign/"
                        ><span class="tag">feign</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/gateway/"
                        ><span class="tag">gateway</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/gc/"
                        ><span class="tag">gc</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/git/"
                        ><span class="tag">git</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/github/"
                        ><span class="tag">github</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/guava/"
                        ><span class="tag">guava</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/http/"
                        ><span class="tag">http</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/hystrix/"
                        ><span class="tag">hystrix</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/java/"
                        ><span class="tag">java</span
                        ><span class="tag">5</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/junit/"
                        ><span class="tag">junit</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/jvm/"
                        ><span class="tag">jvm</span
                        ><span class="tag">5</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/kafka/"
                        ><span class="tag">kafka</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/linux/"
                        ><span class="tag">linux</span
                        ><span class="tag">6</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/lock/"
                        ><span class="tag">lock</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/log/"
                        ><span class="tag">log</span
                        ><span class="tag">5</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/logback/"
                        ><span class="tag">logback</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/maven/"
                        ><span class="tag">maven</span
                        ><span class="tag">4</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/maven-debug/"
                        ><span class="tag">maven debug</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/maven-plugin/"
                        ><span class="tag">maven plugin</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/merge/"
                        ><span class="tag">merge</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/microservices/"
                        ><span class="tag">microservices</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/mock/"
                        ><span class="tag">mock</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/mybatis/"
                        ><span class="tag">mybatis</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/mysql/"
                        ><span class="tag">mysql</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/nacos/"
                        ><span class="tag">nacos</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/namespace/"
                        ><span class="tag">namespace</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/netflix/"
                        ><span class="tag">netflix</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/nginx/"
                        ><span class="tag">nginx</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/oop-klass/"
                        ><span class="tag">oop-klass</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/reactor/"
                        ><span class="tag">reactor</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/rebase/"
                        ><span class="tag">rebase</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/redis/"
                        ><span class="tag">redis</span
                        ><span class="tag">5</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/rpc/"
                        ><span class="tag">rpc</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/session/"
                        ><span class="tag">session</span
                        ><span class="tag">6</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/set/"
                        ><span class="tag">set</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/shell/"
                        ><span class="tag">shell</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/slf4j/"
                        ><span class="tag">slf4j</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/spring/"
                        ><span class="tag">spring</span
                        ><span class="tag">11</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/spring-cloud/"
                        ><span class="tag">spring cloud</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/spring-mvc/"
                        ><span class="tag">spring mvc</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/spring-%E6%89%A9%E5%B1%95%E6%9C%BA%E5%88%B6/"
                        ><span class="tag">spring 扩展机制</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/sql/"
                        ><span class="tag">sql</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/ssh/"
                        ><span class="tag">ssh</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/starter-%E6%9C%BA%E5%88%B6/"
                        ><span class="tag">starter 机制</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/test/"
                        ><span class="tag">test</span
                        ><span class="tag">4</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/testing/"
                        ><span class="tag">testing</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/thread/"
                        ><span class="tag">thread</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/tomcat/"
                        ><span class="tag">tomcat</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/top/"
                        ><span class="tag">top</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/typecheck/"
                        ><span class="tag">typecheck</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/yapi/"
                        ><span class="tag">yapi</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/yum/"
                        ><span class="tag">yum</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a class="tags has-addons" href="/tags/zookeeper/"
                        ><span class="tag">zookeeper</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E4%B8%AD%E5%8F%B0/"
                        ><span class="tag">中台</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/"
                        ><span class="tag">事件机制</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/"
                        ><span class="tag">依赖注入</span
                        ><span class="tag">3</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"
                        ><span class="tag">分布式</span
                        ><span class="tag">6</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E9%93%BE%E8%B7%AF%E8%B7%9F%E8%B8%AA/"
                        ><span class="tag">分布式链路跟踪</span
                        ><span class="tag">4</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"
                        ><span class="tag">反向代理</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E5%8F%8D%E5%B0%84/"
                        ><span class="tag">反射</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E5%90%88%E8%82%A5/"
                        ><span class="tag">合肥</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"
                        ><span class="tag">并发编程</span
                        ><span class="tag">5</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"
                        ><span class="tag">微服务</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E6%9D%AD%E5%B7%9E/"
                        ><span class="tag">杭州</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E6%9E%B6%E6%9E%84/"
                        ><span class="tag">架构</span
                        ><span class="tag">4</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E6%A1%86%E6%9E%B6/"
                        ><span class="tag">框架</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E6%B3%9B%E5%9E%8B/"
                        ><span class="tag">泛型</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/"
                        ><span class="tag">注册中心</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E6%B6%88%E6%81%AF/"
                        ><span class="tag">消息</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD/"
                        ><span class="tag">类加载</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/"
                        ><span class="tag">线程池</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE/"
                        ><span class="tag">自动配置</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"
                        ><span class="tag">负载均衡</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E8%BF%90%E7%BB%B4/"
                        ><span class="tag">运维</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8/"
                        ><span class="tag">迭代器</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E9%85%8D%E7%BD%AE/"
                        ><span class="tag">配置</span
                        ><span class="tag">2</span></a
                      >
                    </div>
                    <div class="control">
                      <a
                        class="tags has-addons"
                        href="/tags/%E9%9B%86%E7%BE%A4%E9%80%89%E4%B8%BB/"
                        ><span class="tag">集群选主</span
                        ><span class="tag">1</span></a
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="column-right-shadow is-hidden-widescreen is-sticky"
            ></div>
          </div>
        </div>
      </div>
    </section>
    <footer class="footer">
      <div class="container">
        <div class="level">
          <div class="level-start">
            <a class="footer-logo is-block mb-2" href="/">J.Queue的技术博客</a>
            <p class="is-size-7">
              <span>&copy; 2022 J.Queue</span>  Powered by
              <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a
              > &amp; <a
                href="https://github.com/ppoffice/hexo-theme-icarus"
                target="_blank"
                rel="noopener"
                >Icarus</a
              ><br /><span id="busuanzi_container_site_uv"
                >共<span id="busuanzi_value_site_uv">0</span>个访客</span
              >
            </p>
          </div>
          <div class="level-end">
            <div class="field has-addons">
              <p class="control">
                <a
                  class="button is-transparent is-large"
                  target="_blank"
                  rel="noopener"
                  title="Download on GitHub"
                  href="https://github.com/glmapper"
                  ><i class="fab fa-github"></i
                ></a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
    <script>
      moment.locale('zh-CN')
    </script>
    <script>
      var IcarusThemeSettings = {
        article: {
          highlight: {
            clipboard: false,
            fold: '',
          },
        },
      }
    </script>
    <script src="/js/column.js"></script>
    <script src="/js/animation.js"></script>
    <a id="back-to-top" title="回到顶端" href="javascript:;"
      ><i class="fas fa-chevron-up"></i
    ></a>
    <script src="/js/back_to_top.js" defer></script>
    <!--!--><!--!--><!--!--><!--!-->
    <script
      src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js"
      defer
    ></script>
    <script>
      window.addEventListener('load', () => {
        window.cookieconsent.initialise({
          type: 'info',
          theme: 'edgeless',
          static: false,
          position: 'bottom-left',
          content: {
            message: '此网站使用Cookie来改善您的体验。',
            dismiss: '知道了！',
            allow: '允许使用Cookie',
            deny: '拒绝',
            link: '了解更多',
            policy: 'Cookie政策',
            href: 'https://www.cookiesandyou.com/',
          },
          palette: {
            popup: {
              background: '#edeff5',
              text: '#838391',
            },
            button: {
              background: '#4b81e8',
            },
          },
        })
      })
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"
      defer
    ></script>
    <script>
      window.addEventListener('load', () => {
        if (typeof $.fn.lightGallery === 'function') {
          $('.article').lightGallery({ selector: '.gallery-item' })
        }
        if (typeof $.fn.justifiedGallery === 'function') {
          if ($('.justified-gallery > p > .gallery-item').length) {
            $('.justified-gallery > p > .gallery-item').unwrap()
          }
          $('.justified-gallery').justifiedGallery()
        }
      })
    </script>
    <!--!--><!--!--><!--!--><!--!--><!--!-->
    <script src="/js/main.js" defer></script>
    <div class="searchbox">
      <div class="searchbox-container">
        <div class="searchbox-header">
          <div class="searchbox-input-container">
            <input
              class="searchbox-input"
              type="text"
              placeholder="想要查找什么..."
            />
          </div>
          <a class="searchbox-close" href="javascript:;">×</a>
        </div>
        <div class="searchbox-body"></div>
      </div>
    </div>
    <script src="/js/insight.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        loadInsight(
          { contentUrl: '/content.json' },
          {
            hint: '想要查找什么...',
            untitled: '(无标题)',
            posts: '文章',
            pages: '页面',
            categories: '分类',
            tags: '标签',
          }
        )
      })
    </script>
  </body>
</html>
